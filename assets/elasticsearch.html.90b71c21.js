import{e as n}from"./app.39480b94.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},p=n(`<h1 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch" aria-hidden="true">#</a> Elasticsearch</h1><h2 id="elastic-stack" tabindex="-1"><a class="header-anchor" href="#elastic-stack" aria-hidden="true">#</a> Elastic Stack</h2><ul><li>Kibana\uFF1A\u6570\u636E\u63A2\u7D22\u4E0E\u53EF\u89C6\u5316\u5206\u6790</li><li>Elasticsearch\uFF1A\u6570\u636E\u5B58\u50A8\u3001\u67E5\u8BE2\u4E0E\u5206\u6790</li><li>Beats\uFF1A\u6570\u636E\u6536\u96C6\u4E0E\u5904\u7406</li><li>Logstash\uFF1A\u6536\u96C6\u3001\u89E3\u6790\u548C\u8F6C\u6362\u65E5\u5FD7</li></ul><h2 id="\u5E38\u89C1\u672F\u8BED" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1\u672F\u8BED" aria-hidden="true">#</a> \u5E38\u89C1\u672F\u8BED</h2><ul><li>\u6587\u6863 Document\uFF1A\u7528\u6237\u5B58\u50A8\u5728 ES \u4E2D\u7684\u6570\u636E</li><li>\u7D22\u5F15 Index\uFF1A\u7531\u5177\u6709\u76F8\u540C\u5B57\u6BB5\u7684\u6587\u6863\u5217\u8868\u7EC4\u6210</li><li>\u8282\u70B9 Node\uFF1A\u4E00\u4E2A ES \u7684\u8FD0\u884C\u5B9E\u4F8B\uFF0C\u662F\u96C6\u7FA4\u7684\u6784\u6210\u5355\u5143</li><li>\u96C6\u7FA4 Cluster\uFF1A\u7531\u4E00\u4E2A\u6216\u591A\u4E2A\u8282\u70B9\u7EC4\u6210\uFF0C\u5BF9\u5916\u63D0\u4F9B\u670D\u52A1</li><li>\u6620\u5C04 Mapping\uFF1A\u5B9A\u4E49\u6587\u6863\u5B57\u6BB5\u7684\u5B58\u50A8\u548C\u7D22\u5F15\u65B9\u5F0F</li><li>\u6B63\u6392\u7D22\u5F15\uFF1A\u4ECE\u6587\u6863 ID \u5230\u6587\u6863\u5185\u5BB9\u7684\u5173\u8054\u5173\u7CFB</li><li>\u5012\u6392\u7D22\u5F15\uFF1A\u4ECE\u6587\u6863\u5185\u5BB9\u5230\u6587\u6863 ID \u7684\u5173\u8054\u5173\u7CFB</li><li>\u5206\u6790\u5668 Analyzer\uFF1A\u5305\u542B \u5B57\u7B26\u8FC7\u6EE4\u5668\u3001\u5206\u8BCD\u5668\u3001\u8BCD\u5143\u8FC7\u6EE4\u5668</li><li>\u5B57\u7B26\u8FC7\u6EE4\u5668 Character Filters\uFF1A\u9488\u5BF9\u539F\u59CB\u6587\u672C\u5904\u7406\uFF0C\u5982\u53BB\u9664 HTML \u6807\u8BB0 <ul><li>HTML Strip\uFF1A\u53BB\u9664 HTML \u6807\u7B7E\u548C\u8F6C\u6362 HTML \u5B9E\u4F53</li><li>Mapping\uFF1A\u8FDB\u884C\u5B57\u7B26\u66FF\u6362\u64CD\u4F5C</li><li>Pattern Replace\uFF1A\u8FDB\u884C\u6B63\u5219\u66FF\u6362\u64CD\u4F5C</li></ul></li><li>\u5206\u8BCD\u5668 Tokenizer\uFF1A\u5C06\u539F\u59CB\u6587\u672C\u6309\u7167\u4E00\u5B9A\u89C4\u5219\u5207\u5206\u4E3A\u5355\u8BCD <ul><li>Standard\uFF1A\u6309\u7167\u5355\u8BCD\u5207\u5206</li><li>Letter\uFF1A\u6309\u7167\u975E\u5B57\u6BCD\u5207\u5206</li><li>Whitespace\uFF1A\u6309\u7167\u7A7A\u683C\u5207\u5206</li><li>UAX URL Email\uFF1A\u4E0E standard \u76F8\u540C\uFF0C\u4F46\u4E0D\u4F1A\u5207\u5206\u90AE\u7BB1\u548C URL</li><li>N-Gram\u3001Edge N-Gram\uFF1A\u8FDE\u8BCD\u5207\u5206</li><li>Path hierarchy\uFF1A\u6309\u6587\u4EF6\u8DEF\u5F84\u5207\u5206</li></ul></li><li>\u8BCD\u5143\u8FC7\u6EE4\u5668 Token Filters\uFF1A\u9488\u5BF9 tokenizer \u7684\u5355\u8BCD\u518D\u52A0\u5DE5\uFF0C\u5982\u8F6C\u5C0F\u5199\u3001\u5220\u9664\u6216\u65B0\u589E\u7B49 <ul><li>Lowercase\uFF1A\u8F6C\u5C0F\u5199</li><li>Stop\uFF1A\u5220\u9664\u7ED3\u675F\u8BCD</li><li>N-Gram\u3001Edge N-Gram\uFF1A\u8FDE\u8BCD\u5207\u5206</li><li>Synonym\uFF1A\u6DFB\u52A0\u8FD1\u4E49\u8BCD</li></ul></li></ul><h2 id="index" tabindex="-1"><a class="header-anchor" href="#index" aria-hidden="true">#</a> Index</h2><h3 id="\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> \u521B\u5EFA\u7D22\u5F15</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>PUT /foo
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="\u5220\u9664\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u7D22\u5F15" aria-hidden="true">#</a> \u5220\u9664\u7D22\u5F15</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>DELETE /foo
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="\u67E5\u770B\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u7D22\u5F15" aria-hidden="true">#</a> \u67E5\u770B\u7D22\u5F15</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>GET /_cat/indices
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="document" tabindex="-1"><a class="header-anchor" href="#document" aria-hidden="true">#</a> Document</h2><h3 id="\u521B\u5EFA\u6587\u6863-\u6307\u5B9A-id" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u6587\u6863-\u6307\u5B9A-id" aria-hidden="true">#</a> \u521B\u5EFA\u6587\u6863\uFF08\u6307\u5B9A ID\uFF09</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /foo/<span class="token number">1</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Peter&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u521B\u5EFA\u6587\u6863-\u4E0D\u6307\u5B9A-id" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u6587\u6863-\u4E0D\u6307\u5B9A-id" aria-hidden="true">#</a> \u521B\u5EFA\u6587\u6863\uFF08\u4E0D\u6307\u5B9A ID\uFF09</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /foo
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Peter&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u5220\u9664\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u6587\u6863" aria-hidden="true">#</a> \u5220\u9664\u6587\u6863</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>DELETE /foo/1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="\u901A\u8FC7-id-\u67E5\u8BE2\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u901A\u8FC7-id-\u67E5\u8BE2\u6587\u6863" aria-hidden="true">#</a> \u901A\u8FC7 ID \u67E5\u8BE2\u6587\u6863</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>GET /foo/1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="\u901A\u8FC7\u6761\u4EF6\u67E5\u8BE2\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u901A\u8FC7\u6761\u4EF6\u67E5\u8BE2\u6587\u6863" aria-hidden="true">#</a> \u901A\u8FC7\u6761\u4EF6\u67E5\u8BE2\u6587\u6863</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /foo/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="\u6279\u91CF\u64CD\u4F5C\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u6279\u91CF\u64CD\u4F5C\u6587\u6863" aria-hidden="true">#</a> \u6279\u91CF\u64CD\u4F5C\u6587\u6863</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _bulk

<span class="token comment">// \u66FF\u6362\u6587\u6863</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;field1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value1&quot;</span><span class="token punctuation">}</span>

<span class="token comment">// \u5220\u9664\u6587\u6863</span>
<span class="token punctuation">{</span><span class="token property">&quot;delete&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment">// \u521B\u5EFA\u6587\u6863</span>
<span class="token punctuation">{</span><span class="token property">&quot;create&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;field1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value3&quot;</span><span class="token punctuation">}</span>

<span class="token comment">// \u66F4\u65B0\u6587\u6863</span>
<span class="token punctuation">{</span><span class="token property">&quot;update&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;field2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="\u6279\u91CF\u67E5\u8BE2\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u6279\u91CF\u67E5\u8BE2\u6587\u6863" aria-hidden="true">#</a> \u6279\u91CF\u67E5\u8BE2\u6587\u6863</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET _mget
<span class="token punctuation">{</span>
  <span class="token property">&quot;docs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="analyze" tabindex="-1"><a class="header-anchor" href="#analyze" aria-hidden="true">#</a> Analyze</h2><h3 id="\u5185\u5EFA\u5206\u6790\u5668" tabindex="-1"><a class="header-anchor" href="#\u5185\u5EFA\u5206\u6790\u5668" aria-hidden="true">#</a> \u5185\u5EFA\u5206\u6790\u5668</h3><p><strong>Standard</strong>\uFF1A\u9ED8\u8BA4\u5206\u6790\u5668\uFF0C\u6309 Unicode \u6587\u672C\u5206\u6BB5\u7B97\u6CD5\u5206\u8BCD\uFF0C\u652F\u6301\u591A\u8BED\u8A00\uFF0C\u5C0F\u5199\u5904\u7406</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stop (Disabled by default)&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Simple</strong>\uFF1A\u6309\u7167\u975E\u5B57\u6BCD\u5207\u5206\uFF0C\u5C0F\u5199\u5904\u7406</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lowercase&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Whitespace</strong>\uFF1A\u6309\u7167\u7A7A\u683C\u5207\u5206</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;whitespace&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Stop</strong>\uFF1A\u4E0E Simple \u5206\u6790\u5668\u4E00\u81F4\uFF0C\u4F46\u52A0\u5165\u4E86\u5220\u9664 an/the \u8FD9\u7C7B\u7684\u4FEE\u9970\u8BCD</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stop&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Keyword</strong>\uFF1A\u4E0D\u5206\u8BCD\uFF0C\u76F4\u63A5\u5C06\u8F93\u5165\u4F5C\u4E3A\u4E00\u4E2A\u5355\u8BCD</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Pattern</strong>\uFF1A\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u5206\u8BCD</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pattern&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stop (Disabled by default)&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Language</strong>\uFF1A\u9488\u5BF9\u7279\u5B9A\u8BED\u8A00\u7684\u5206\u8BCD\u5668</p><h3 id="\u6307\u5B9A\u5206\u6790\u5668\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A\u5206\u6790\u5668\u5206\u6790" aria-hidden="true">#</a> \u6307\u5B9A\u5206\u6790\u5668\u5206\u6790</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u6307\u5B9A\u5206\u8BCD\u5668\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A\u5206\u8BCD\u5668\u5206\u6790" aria-hidden="true">#</a> \u6307\u5B9A\u5206\u8BCD\u5668\u5206\u6790</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST _analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="\u6307\u5B9A\u7D22\u5F15\u5B57\u6BB5\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A\u7D22\u5F15\u5B57\u6BB5\u5206\u6790" aria-hidden="true">#</a> \u6307\u5B9A\u7D22\u5F15\u5B57\u6BB5\u5206\u6790</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /foo/_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Janey Holmes&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u521B\u5EFA\u81EA\u5B9A\u4E49\u5206\u6790\u5668" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u81EA\u5B9A\u4E49\u5206\u6790\u5668" aria-hidden="true">#</a> \u521B\u5EFA\u81EA\u5B9A\u4E49\u5206\u6790\u5668</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT test
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;analysis&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;my_custom_analyzer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;emoticons&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;punctuation&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;lowercase&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;english_stop&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;punctuation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pattern&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;pattern&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[ .,!?]&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;char_filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;emoticons&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mapping&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;:) =&gt; _happy_&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;:( =&gt; _sad_&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;english_stop&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stop&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;stopwords&quot;</span><span class="token operator">:</span> <span class="token string">&quot;_english_&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlight-line">\xA0</div><br><div class="highlight-line">\xA0</div><br><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="mapping" tabindex="-1"><a class="header-anchor" href="#mapping" aria-hidden="true">#</a> Mapping</h2><h3 id="\u663E\u5F0F\u6620\u5C04\u521B\u5EFA\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u663E\u5F0F\u6620\u5C04\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> \u663E\u5F0F\u6620\u5C04\u521B\u5EFA\u7D22\u5F15</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /test
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;age&quot;</span><span class="token operator">:</span>   <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;integer&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span>  <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="\u6DFB\u52A0\u5B57\u6BB5\u5230\u73B0\u5B58\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u5B57\u6BB5\u5230\u73B0\u5B58\u6620\u5C04" aria-hidden="true">#</a> \u6DFB\u52A0\u5B57\u6BB5\u5230\u73B0\u5B58\u6620\u5C04</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /test/_mapping
<span class="token punctuation">{</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;employee-id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="\u67E5\u770B\u7D22\u5F15\u7684\u6620\u5C04\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u7D22\u5F15\u7684\u6620\u5C04\u5173\u7CFB" aria-hidden="true">#</a> \u67E5\u770B\u7D22\u5F15\u7684\u6620\u5C04\u5173\u7CFB</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>GET /test/_mapping
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="\u6307\u5B9A\u6620\u5C04\u5B57\u6BB5\u7684\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u6307\u5B9A\u6620\u5C04\u5B57\u6BB5\u7684\u53C2\u6570" aria-hidden="true">#</a> \u6307\u5B9A\u6620\u5C04\u5B57\u6BB5\u7684\u53C2\u6570</h3><ul><li><strong>dynamic</strong>\uFF1A\u8BBE\u7F6E\u662F\u5426\u53EF\u4EE5\u52A8\u6001\u65B0\u589E\u5B57\u6BB5 <ul><li><em>true</em>\uFF1A\u81EA\u52A8\u6DFB\u52A0\uFF08\u9ED8\u8BA4\uFF09\uFF1B</li><li><em>false</em>\uFF1A\u5FFD\u7565\u65B0\u5B57\u6BB5\u6DFB\u52A0\uFF0C\u8FD9\u4E9B\u5B57\u6BB5\u5C06\u4E0D\u4F1A\u88AB\u7D22\u5F15\uFF0C\u56E0\u6B64\u65E0\u6CD5\u901A\u8FC7\u5176\u6765\u641C\u7D22\u3002\u4F46\u4ECD\u7136\u4F1A\u51FA\u73B0\u5728 <code>_source</code> \u4E2D\uFF1B</li><li><em>strict</em>\uFF1A\u4E25\u683C\u6A21\u5F0F\uFF0C\u68C0\u6D4B\u5230\u4E3A\u5728 mapping \u4E2D\u5B9A\u4E49\u7684\u5B57\u6BB5\u76F4\u63A5\u62A5\u9519\uFF1B</li></ul></li><li><strong>copy_to</strong>\uFF1A\u5C06\u591A\u4E2A\u5B57\u6BB5\u590D\u5236\u5230\u540C\u4E00\u7EC4\u5B57\u6BB5\u4E2D\uFF0C\u4EE5\u4FBF\u5C06\u5176\u4F5C\u4E3A\u5355\u4E2A\u5B57\u6BB5\u8FDB\u884C\u67E5\u8BE2</li><li><strong>index</strong>\uFF1A\u63A7\u5236\u662F\u5426\u5BF9\u5B57\u6BB5\u503C\u5EFA\u7ACB\u7D22\u5F15</li><li><strong>index_options</strong><ul><li><em>docs</em>\uFF1A\u53EA\u8BB0\u5F55\u6587\u6863 ID\uFF1B</li><li><em>freqs</em>\uFF1A\u8BB0\u5F55\u6587\u6863 ID\u3001\u8BCD\u9891\uFF1B</li><li><em>positions</em>\uFF1A\u8BB0\u5F55\u6587\u6863 ID\u3001\u8BCD\u9891\u3001\u8BCD\u7684\u4F4D\u7F6E\uFF08\u9ED8\u8BA4\uFF09\uFF1B</li><li><em>offsets</em>\uFF1A\u8BB0\u5F55\u6587\u6863 ID\u3001\u8BCD\u9891\u3001\u8BCD\u7684\u4F4D\u7F6E\u3001\u8BCD\u7684\u5F00\u59CB\u548C\u7ED3\u675F\u5B57\u7B26\u504F\u79FB\uFF1B</li></ul></li><li><strong>null_value</strong>\uFF1A\u5F53\u9047\u5230 <code>null</code> \u503C\u65F6\u7684\u9ED8\u8BA4\u503C</li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT test
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dynamic&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;copy_to&quot;</span><span class="token operator">:</span> <span class="token string">&quot;full_name&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;index_options&quot;</span><span class="token operator">:</span> <span class="token string">&quot;positions&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;copy_to&quot;</span><span class="token operator">:</span> <span class="token string">&quot;full_name&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;null_value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NULL&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

PUT test/_doc/<span class="token number">1</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span>
<span class="token punctuation">}</span>

GET test/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Smith&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;operator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;and&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">\xA0</div><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="\u81EA\u5B9A\u4E49\u7D22\u5F15\u6620\u5C04\u6A21\u677F" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u7D22\u5F15\u6620\u5C04\u6A21\u677F" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u7D22\u5F15\u6620\u5C04\u6A21\u677F</h3><p>\u5C06\u6240\u6709 string \u7C7B\u578B\u6620\u5C04\u4E3A keyword</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT test
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dynamic_templates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;strings_as_keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;match_mapping_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;mapping&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u5339\u914D\u5B57\u6BB5\u540D\u4EE5 <code>long_</code> \u5F00\u5934\u4E14\u4E0D\u4EE5 <code>_text</code> \u7ED3\u5C3E\u7684 string \u6620\u5C04\u4E3A long</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT test
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dynamic_templates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;longs_as_strings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;match_mapping_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;match&quot;</span><span class="token operator">:</span>   <span class="token string">&quot;long_*&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;unmatch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*_text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;mapping&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;long&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="search" tabindex="-1"><a class="header-anchor" href="#search" aria-hidden="true">#</a> Search</h2><h3 id="\u67E5\u8BE2\u5F62\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u5F62\u5F0F" aria-hidden="true">#</a> \u67E5\u8BE2\u5F62\u5F0F</h3><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>GET /_search
GET /my_index/_search
GET /my_index,my_index2/_search
GET /my_*/_search
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u901A\u8FC7 URI \u67E5\u8BE2</p><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code>GET /my_index/_search?q=user:alfred
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u4F7F\u7528 Request Body \u67E5\u8BE2</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /my_index/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alfred&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="\u8FD0\u884C\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u884C\u673A\u5236" aria-hidden="true">#</a> \u8FD0\u884C\u673A\u5236</h3><p>Search \u5728\u6267\u884C\u65F6\u5206\u4E3A\u4E24\u4E2A\u9636\u6BB5\uFF1A</p><ul><li>Query\uFF1A\u7528\u6237\u5411\u96C6\u7FA4\u53D1\u8D77\u4E00\u4E2A\u67E5\u8BE2\u8BF7\u6C42\uFF0C\u534F\u8C03\u8282\u70B9\uFF08Coordination Node\uFF09\u5728\u542B\u6709\u6570\u636E\u7684\u4E3B\u526F\u5206\u7247\u4E2D\u968F\u673A\u9009\u62E9 N \u4E2A\u5206\u7247\uFF0C\u5E76\u5411\u8FD9\u4E9B\u5206\u7247\u53D1\u9001 Search Request\uFF0C\u88AB\u9009\u4E2D\u7684\u5206\u7247\u4F1A\u6267\u884C\u67E5\u8BE2\u67E5\u627E\u5339\u914D\u6587\u6863\u5E76\u6309\u6307\u5B9A\u7684\u6392\u5E8F\u89C4\u5219\u6392\u5E8F\uFF0C\u7136\u540E\u5C06 from+size \u4E2A\u6587\u6863 ID \u503C\u8FD4\u56DE\u7ED9\u534F\u8C03\u8282\u70B9\u3002\u5B9E\u9645\u534F\u8C03\u8282\u70B9\u62FF\u5230\u4E86 <code>(from+size)*N</code> \u4E2A\u6587\u6863\uFF0C\u6700\u540E\u534F\u8C03\u8282\u70B9\u518D\u5BF9\u8FD9\u4E9B\u6587\u6863\u6392\u5E8F\u62FF\u51FA from \u5230 size \u4E2A\u6587\u6863\u3002</li><li>Fetch\uFF1A\u534F\u8C03\u8282\u70B9\u5411\u76F8\u5173\u7684 N \u4E2A\u5206\u7247\u53D1\u9001 <code>multi_get</code> \u8BF7\u6C42\uFF0C\u62FF\u5230\u6587\u6863\u8BE6\u7EC6\u6570\u636E\uFF0C\u7136\u540E\u62FC\u63A5\u8FD4\u56DE\u7684\u6570\u636E\u7ED9\u5BA2\u6237\u3002</li></ul><h3 id="uri-search" tabindex="-1"><a class="header-anchor" href="#uri-search" aria-hidden="true">#</a> URI Search</h3><p>\u901A\u8FC7 URI Query \u53C2\u6570\u5B9E\u73B0\u7B80\u5355\u641C\u7D22\uFF0C\u5E38\u7528\u53C2\u6570\u5982\u4E0B\uFF1A</p><ul><li><p>q \u6307\u5B9A\u67E5\u8BE2\u8BED\u53E5</p><ul><li><strong>\u6CDB\u67E5\u8BE2</strong>\uFF1Aalfred \u7B49\u6548\u5728\u6240\u6709\u5B57\u6BB5\u53BB\u5339\u914D term</li><li><strong>\u6307\u5B9A\u5B57\u6BB5</strong>\uFF1Afield:alfred</li><li><strong>Term</strong>\uFF1Aalfred way \u7B49\u6548\u4E8E alfred OR way</li><li><strong>Phrase</strong>\uFF1A&quot;alfred way&quot; \u8BCD\u8BED\u5339\u914D\uFF0C\u8981\u6C42\u5148\u540E\u987A\u5E8F</li><li><strong>Group \u5206\u7EC4\u5339\u914D</strong>\uFF1A <ul><li>(quick OR brown) AND fox</li><li>status:(active OR padding) title:(full text search)</li></ul></li><li><strong>\u5E03\u5C14\u64CD\u4F5C\u7B26</strong>\uFF1AAND(&amp;&amp;)\uFF0COR(||)\uFF0CNOT(!)\uFF0C\u533A\u5206\u5927\u5C0F\u5199 <ul><li>name:(tom NOT lee)</li></ul></li><li><strong>must\u3001must_not</strong>\uFF1A\u5206\u522B\u5BF9\u5E94\u4E8E <code>+</code> <code>-</code><ul><li>name:(tom +lee -alfred)</li><li>name:((lee &amp;&amp; !alfred) || (tom &amp;&amp; lee &amp;&amp; !alfred))</li><li><code>+</code> \u5728 URL \u4E2D\u4F1A\u88AB\u89E3\u6790\u4E3A\u7A7A\u683C\uFF0C\u9700\u8981\u4F7F\u7528 <code>%2B</code> \u4EE3\u66FF</li></ul></li><li><strong>\u8303\u56F4\u67E5\u8BE2</strong>\uFF1A\u5F00\u533A\u95F4{}\uFF0C\u95ED\u533A\u95F4[] <ul><li>age:[1 TO 10] \u610F\u4E3A 1&lt;=age&lt;=10</li><li>age:[1 TO 10} \u610F\u4E3A 1&lt;=age&lt;10</li><li>age:[1 TO ] \u610F\u4E3A age&gt;=1</li><li>age:[* TO 10] \u610F\u4E3A age&lt;=10</li><li>\u4E5F\u652F\u6301 age:(&gt;=1 &amp;&amp; &lt;=10) \u6216 age:(+&gt;=1 +&lt;=10)</li></ul></li><li><strong>\u901A\u914D\u7B26\u67E5\u8BE2</strong>\uFF1A<code>?</code> \u4EE3\u8868\u4E00\u4E2A\u5B57\u7B26\uFF0C<code>*</code> \u4EE3\u8868\u591A\u4E2A\u5B57\u7B26 <ul><li>name:t?m</li><li>name:tom*</li><li>name:t*m</li><li>\u901A\u914D\u7B26\u5339\u914D\u6548\u7387\u4F4E\uFF0C\u5360\u7528\u5185\u5B58\u591A\uFF0C\u4E0D\u5EFA\u8BAE\u4F7F\u7528</li></ul></li><li><strong>\u6B63\u5219\u8868\u8FBE\u5F0F\u5339\u914D</strong>\uFF1A <ul><li>name:/[mb]oat/</li></ul></li><li><strong>\u6A21\u7CCA\u5339\u914D</strong>\uFF1A\u5339\u914D\u4E0E roam \u5DEE 1 \u4E2A\u5B57\u7B26\u7684\u8BCD\uFF0C\u5982 foam\u3001roams \u7B49 <ul><li>name:roam~1</li></ul></li><li><strong>\u8FD1\u4F3C\u5EA6\u67E5\u8BE2</strong>\uFF1A\u4EE5 term \u4E3A\u5355\u8BCD\u5DEE\u5F02\u6BD4\u8F83\uFF0C\u5982 &quot;quick fox&quot;\u3001&quot;quick brown fox&quot; \u90FD\u4F1A\u5339\u914D <ul><li>&quot;fox quick&quot;~5</li></ul></li></ul></li></ul><ul><li>df \u53C2\u4E0E\u5339\u914D\u7684\u5B57\u6BB5\uFF0C\u82E5\u4E0D\u6307\u5B9A\u5219\u67E5\u8BE2\u6240\u6709</li><li>sort \u6392\u5E8F</li><li>timeout \u8D85\u65F6\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u4E0D\u8D85\u65F6</li><li>from, size \u5206\u9875</li></ul><h3 id="request-body-search" tabindex="-1"><a class="header-anchor" href="#request-body-search" aria-hidden="true">#</a> Request Body Search</h3><ul><li><strong>match</strong>\uFF1A\u5168\u6587\u641C\u7D22</li><li><strong>match_phrase</strong>\uFF1A\u77ED\u8BED\u5339\u914D</li><li><strong>term</strong>\uFF1A\u7CBE\u786E\u503C\u67E5\u627E</li><li><strong>terms</strong>\uFF1A\u67E5\u627E\u591A\u4E2A\u7CBE\u786E\u503C</li><li><strong>range</strong>\uFF1A\u8303\u56F4\u67E5\u8BE2</li><li><strong>query_string</strong>\uFF1A\u901A\u8FC7\u67E5\u8BE2\u5B57\u7B26\u4E32\u5339\u914D\u6587\u6863</li><li><strong>simple_query_string</strong>\uFF1A\u901A\u8FC7\u7B80\u5355\u67E5\u8BE2\u8BED\u6CD5\u5339\u914D\u6587\u6863\uFF0C\u5177\u6709\u6709\u9650\u5BB9\u9519\u6027</li><li><strong>constant_score</strong>\uFF1A\u5C06\u67E5\u8BE2\u7ED3\u679C\u5F97\u5206\u8BBE\u7F6E\u4E3A 1</li><li><strong>bool</strong>\uFF1A\u591A\u6761\u4EF6\u7EC4\u5408\u67E5\u8BE2 <ul><li><em>must</em>\uFF1A\u6587\u6863\u5FC5\u987B\u7B26\u5408 must \u4E2D\u7684\u6240\u6709\u6761\u4EF6\uFF0C\u4F1A\u5F71\u54CD\u76F8\u5173\u6027\u5F97\u5206</li><li><em>must_not</em>\uFF1A\u6587\u6863\u5FC5\u987B\u4E0D\u7B26\u5408 must_not \u4E2D\u7684\u6240\u6709\u6761\u4EF6\uFF0C\u4F1A\u5F71\u54CD\u76F8\u5173\u6027\u5F97\u5206</li><li><em>should</em>\uFF1A\u6587\u6863\u53EF\u4EE5\u7B26\u5408 should \u4E2D\u7684\u6761\u4EF6\uFF0C\u4F1A\u5F71\u54CD\u76F8\u5173\u6027\u5F97\u5206</li><li><em>filter</em>\uFF1A\u53EA\u8FC7\u6EE4\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\uFF0C\u4E0D\u8BA1\u7B97\u76F8\u5173\u6027\u5F97\u5206</li></ul></li></ul><h3 id="\u76F8\u5173\u6027\u7B97\u5206" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u6027\u7B97\u5206" aria-hidden="true">#</a> \u76F8\u5173\u6027\u7B97\u5206</h3><p>\u76F8\u5173\u6027\u7B97\u5206\u5728 share \u4E4B\u95F4\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\uFF0C\u8FD9\u610F\u5473\u7740\u76F8\u540C Term \u7684 IDF \u5728\u4E0D\u540C\u5206\u7247\u4E0A\u7684\u7B97\u5206\u662F\u4E0D\u540C\u7684\u3002\u5728\u6587\u6863\u6570\u91CF\u4E0D\u591A\u7684\u60C5\u51B5\u4E0B\uFF0C\u4F1A\u5BFC\u81F4\u76F8\u5173\u6027\u7B97\u5206\u4E25\u91CD\u4E0D\u51C6\u3002</p><p>\u89E3\u51B3\u601D\u8DEF\u6709\u4E24\u4E2A\uFF1A</p><ol><li>\u8BBE\u7F6E\u5206\u7247\u6570\u4E3A 1\uFF0C\u4ECE\u6839\u672C\u4E0A\u89E3\u51B3\u6B64\u95EE\u9898\u3002\u8003\u8651\u5728\u6587\u6863\u6570\u4E0D\u591A\u7684\u60C5\u51B5\u4E0B\u91C7\u7528\u6B64\u65B9\u6848\uFF1B</li><li>\u4F7F\u7528 DFS Query-then-Fetch \u67E5\u8BE2\u65B9\u5F0F\uFF1A\u5728\u62FF\u5230\u6240\u6709\u6587\u6863\u540E\u518D\u91CD\u65B0\u8BA1\u7B97\u4E00\u904D\u76F8\u5173\u6027\u7B97\u5206\uFF0C\u8017\u8D39\u66F4\u591A\u7684 CPU \u4E0E\u5185\u5B58\uFF0C\u6027\u80FD\u4F4E\u4E0B\uFF0C\u4E00\u822C\u4E0D\u5EFA\u8BAE\u4F7F\u7528\uFF1B</li></ol><p>ES \u9ED8\u8BA4\u4F1A\u91C7\u7528\u76F8\u5173\u6027\u7B97\u5206\u6392\u5E8F\uFF0C\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u8BBE\u5B9A sorting \u53C2\u6570\u4FEE\u6539\u6392\u5E8F\u89C4\u5219\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET test/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;desc&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u4F7F\u7528\u591A\u4E2A</span>
GET test/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;desc&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">&quot;_score&quot;</span><span class="token operator">:</span> <span class="token string">&quot;desc&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// \u76F8\u5173\u6027\u7B97\u5206</span>
    <span class="token punctuation">{</span><span class="token property">&quot;_doc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;desc&quot;</span><span class="token punctuation">}</span>     <span class="token comment">// \u6587\u6863 ID</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div>`,87);function e(t,o){return p}var c=s(a,[["render",e]]);export{c as default};
