<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <title>Subversion | NOTES</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app.39480b94.js"><link rel="modulepreload" href="/assets/subversion.html.ab9e74e2.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/subversion.html.f507d799.js">
    <link rel="stylesheet" href="/assets/style.4634000d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">NOTES</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Subversion</p><ul class=""><li><!--[--><a aria-current="page" href="/tools/subversion.html#client" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Client"><!--[--><!--]--> Client <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/tools/subversion.html#检出远端库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="检出远端库"><!--[--><!--]--> 检出远端库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#导出远端库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="导出远端库"><!--[--><!--]--> 导出远端库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#重定向版本库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="重定向版本库"><!--[--><!--]--> 重定向版本库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#添加文件跟踪" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="添加文件跟踪"><!--[--><!--]--> 添加文件跟踪 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#提交到远端库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="提交到远端库"><!--[--><!--]--> 提交到远端库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#更新本地版本" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="更新本地版本"><!--[--><!--]--> 更新本地版本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#处理版本冲突" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="处理版本冲突"><!--[--><!--]--> 处理版本冲突 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#查看提交日志" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="查看提交日志"><!--[--><!--]--> 查看提交日志 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#创建并跟踪目录" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="创建并跟踪目录"><!--[--><!--]--> 创建并跟踪目录 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#复制并跟踪文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="复制并跟踪文件"><!--[--><!--]--> 复制并跟踪文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#查看版本库信息" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="查看版本库信息"><!--[--><!--]--> 查看版本库信息 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#比较文件版本差异" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="比较文件版本差异"><!--[--><!--]--> 比较文件版本差异 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#还原被更改的文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="还原被更改的文件"><!--[--><!--]--> 还原被更改的文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#从版本库中删除文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="从版本库中删除文件"><!--[--><!--]--> 从版本库中删除文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#锁定版本库中的文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="锁定版本库中的文件"><!--[--><!--]--> 锁定版本库中的文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#查看当前工作区文件状态" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="查看当前工作区文件状态"><!--[--><!--]--> 查看当前工作区文件状态 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#列出经由版本控制的文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="列出经由版本控制的文件"><!--[--><!--]--> 列出经由版本控制的文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#复制本地文件到远端仓库并提交" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="复制本地文件到远端仓库并提交"><!--[--><!--]--> 复制本地文件到远端仓库并提交 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#复制远端仓库的最新文件到本地" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="复制远端仓库的最新文件到本地"><!--[--><!--]--> 复制远端仓库的最新文件到本地 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#从远端库复制文件到远端库并提交" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="从远端库复制文件到远端库并提交"><!--[--><!--]--> 从远端库复制文件到远端库并提交 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#不检出文件直接查看远端版本内容" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="不检出文件直接查看远端版本内容"><!--[--><!--]--> 不检出文件直接查看远端版本内容 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#server" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Server"><!--[--><!--]--> Server <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/tools/subversion.html#创建存储库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="创建存储库"><!--[--><!--]--> 创建存储库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#删除存储库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="删除存储库"><!--[--><!--]--> 删除存储库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#配置存储库" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="配置存储库"><!--[--><!--]--> 配置存储库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#启动存储库服务" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="启动存储库服务"><!--[--><!--]--> 启动存储库服务 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#停止存储库服务" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="停止存储库服务"><!--[--><!--]--> 停止存储库服务 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/tools/subversion.html#版本库精简流程" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="版本库精简流程"><!--[--><!--]--> 版本库精简流程 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="subversion" tabindex="-1"><a class="header-anchor" href="#subversion" aria-hidden="true">#</a> Subversion</h1><h2 id="client" tabindex="-1"><a class="header-anchor" href="#client" aria-hidden="true">#</a> Client</h2><h3 id="检出远端库" tabindex="-1"><a class="header-anchor" href="#检出远端库" aria-hidden="true">#</a> 检出远端库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn checkout svn://ip:port <span class="token punctuation">[</span>-r <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> --username <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> --password <span class="token operator">&lt;</span>pwd<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="导出远端库" tabindex="-1"><a class="header-anchor" href="#导出远端库" aria-hidden="true">#</a> 导出远端库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn <span class="token builtin class-name">export</span> svn://ip:port <span class="token punctuation">[</span>-r <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> --username <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> --password <span class="token operator">&lt;</span>pwd<span class="token operator">&gt;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="重定向版本库" tabindex="-1"><a class="header-anchor" href="#重定向版本库" aria-hidden="true">#</a> 重定向版本库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 当远端版本库 URL 发生变化时使用此命令</span>
svn switch --relocate svn://ip:port/old svn://ip:port/new
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="添加文件跟踪" tabindex="-1"><a class="header-anchor" href="#添加文件跟踪" aria-hidden="true">#</a> 添加文件跟踪</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn <span class="token function">add</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token punctuation">[</span>--force --non-recursive<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="提交到远端库" tabindex="-1"><a class="header-anchor" href="#提交到远端库" aria-hidden="true">#</a> 提交到远端库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn commit -m <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="更新本地版本" tabindex="-1"><a class="header-anchor" href="#更新本地版本" aria-hidden="true">#</a> 更新本地版本</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn update
svn update *  <span class="token comment"># 默认版本库相同版本只会更新 1 次，使用 * 强制更新每个文件</span>
svn update -r <span class="token number">1</span> foo  <span class="token comment"># 更新到版本 1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="处理版本冲突" tabindex="-1"><a class="header-anchor" href="#处理版本冲突" aria-hidden="true">#</a> 处理版本冲突</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn resolve <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
svn resolved <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
<span class="token comment"># 标记为已处理，若为手动编辑处理则必须执行此步骤，使用 resolve 处理则无需进行</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="查看提交日志" tabindex="-1"><a class="header-anchor" href="#查看提交日志" aria-hidden="true">#</a> 查看提交日志</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn log
svn log <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="创建并跟踪目录" tabindex="-1"><a class="header-anchor" href="#创建并跟踪目录" aria-hidden="true">#</a> 创建并跟踪目录</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn <span class="token function">mkdir</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="复制并跟踪文件" tabindex="-1"><a class="header-anchor" href="#复制并跟踪文件" aria-hidden="true">#</a> 复制并跟踪文件</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn copy foo bar
svn copy -r <span class="token number">1</span> foo bar  <span class="token comment"># 复制 foo 的版本 1 为 bar</span>
svn copy foo bar baz  <span class="token comment"># 复制多个文件到 baz 目录</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="查看版本库信息" tabindex="-1"><a class="header-anchor" href="#查看版本库信息" aria-hidden="true">#</a> 查看版本库信息</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn info
svn info <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
svn info --xml  <span class="token comment"># 使用 XML 格式输出</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="比较文件版本差异" tabindex="-1"><a class="header-anchor" href="#比较文件版本差异" aria-hidden="true">#</a> 比较文件版本差异</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn <span class="token function">diff</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>path<span class="token operator">&gt;</span><span class="token punctuation">]</span>
svn <span class="token function">diff</span> -r <span class="token number">1</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>  <span class="token comment"># 与版本 1 比较</span>
svn <span class="token function">diff</span> -r <span class="token number">1</span>:2 <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>  <span class="token comment"># 比较版本 1 与版本 2 的区别</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="还原被更改的文件" tabindex="-1"><a class="header-anchor" href="#还原被更改的文件" aria-hidden="true">#</a> 还原被更改的文件</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn revert <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token punctuation">[</span>--recursive<span class="token punctuation">]</span>
svn revert --recursive *  <span class="token comment"># 递归还原所有文件</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="从版本库中删除文件" tabindex="-1"><a class="header-anchor" href="#从版本库中删除文件" aria-hidden="true">#</a> 从版本库中删除文件</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn delete <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
<span class="token comment"># ...or</span>
svn remove <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="锁定版本库中的文件" tabindex="-1"><a class="header-anchor" href="#锁定版本库中的文件" aria-hidden="true">#</a> 锁定版本库中的文件</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn lock <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
svn unlock <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>  <span class="token comment"># 解除锁定</span>

<span class="token comment"># 默认提交后就会自动解锁，若不想解锁可以使用</span>
svn commit -m <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span> --no-unlock <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="查看当前工作区文件状态" tabindex="-1"><a class="header-anchor" href="#查看当前工作区文件状态" aria-hidden="true">#</a> 查看当前工作区文件状态</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn status

<span class="token comment"># ? - 无版本控制</span>
<span class="token comment"># D - 被标记从版本库删除</span>
<span class="token comment"># M - 已编辑</span>
<span class="token comment"># A - 被标记增加到版本控制</span>
<span class="token comment"># R - 文件被替换</span>
<span class="token comment"># C - 文件冲突</span>
<span class="token comment"># ! - 文件缺失</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="列出经由版本控制的文件" tabindex="-1"><a class="header-anchor" href="#列出经由版本控制的文件" aria-hidden="true">#</a> 列出经由版本控制的文件</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn list <span class="token punctuation">[</span>-v<span class="token punctuation">]</span> <span class="token punctuation">[</span>--recursive<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="复制本地文件到远端仓库并提交" tabindex="-1"><a class="header-anchor" href="#复制本地文件到远端仓库并提交" aria-hidden="true">#</a> 复制本地文件到远端仓库并提交</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn copy foo svn://ip:port/bar -m <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span>
<span class="token comment"># 这种用法可以避免本地 commit 而直接复制到远端仓库中提交，</span>
<span class="token comment"># 但是只能是复制到与当前本地版本库向对等的远端库，不能跨库操作</span>

svn update <span class="token comment"># 复制完后可以更新下本地库的版本</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="复制远端仓库的最新文件到本地" tabindex="-1"><a class="header-anchor" href="#复制远端仓库的最新文件到本地" aria-hidden="true">#</a> 复制远端仓库的最新文件到本地</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn copy svn://ip:port/foo bar
<span class="token comment"># 与上条命令相似，但此命令支持跨库操作</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="从远端库复制文件到远端库并提交" tabindex="-1"><a class="header-anchor" href="#从远端库复制文件到远端库并提交" aria-hidden="true">#</a> 从远端库复制文件到远端库并提交</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 此操作同样不允许跨库操作</span>
svn copy svn://ip:port/foo svn://ip:port/bar -m <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span>

<span class="token comment"># 常见用法：复制整个仓库、创建分支</span>
<span class="token comment"># 复制整个仓库到 branch 子仓库，后面不加文件名则表示复制整个仓库</span>
svn copy svn://ip:port/ svn://ip:port/branch -m <span class="token operator">&lt;</span>msg<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="不检出文件直接查看远端版本内容" tabindex="-1"><a class="header-anchor" href="#不检出文件直接查看远端版本内容" aria-hidden="true">#</a> 不检出文件直接查看远端版本内容</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svn <span class="token function">cat</span> svn://ip:port/foo
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="server" tabindex="-1"><a class="header-anchor" href="#server" aria-hidden="true">#</a> Server</h2><h3 id="创建存储库" tabindex="-1"><a class="header-anchor" href="#创建存储库" aria-hidden="true">#</a> 创建存储库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svnadmin create <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="删除存储库" tabindex="-1"><a class="header-anchor" href="#删除存储库" aria-hidden="true">#</a> 删除存储库</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">rm</span> -rf <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="配置存储库" tabindex="-1"><a class="header-anchor" href="#配置存储库" aria-hidden="true">#</a> 配置存储库</h3><p>配置文件存放于 <code>/path/repos/conf</code> 目录</p><ul><li><p>authz 用户组及用户组权限配置</p></li><li><p>passwd 用户名密码配置</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">users</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">name</span> <span class="token punctuation">=</span> <span class="token value attr-value">secret</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>svnserve.conf 配置默认权限、权限配置文件及密码配置文件</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">anon-access</span> <span class="token punctuation">=</span> <span class="token value attr-value">read   #未登录用户权限 (可选 none|read|write)</span>
<span class="token key attr-name">auth-access</span> <span class="token punctuation">=</span> <span class="token value attr-value">write  #已登录用户权限 (可选 none|read|write)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h3 id="启动存储库服务" tabindex="-1"><a class="header-anchor" href="#启动存储库服务" aria-hidden="true">#</a> 启动存储库服务</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>svnserve -d -r <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token punctuation">[</span>--listen-port <span class="token number">3690</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="停止存储库服务" tabindex="-1"><a class="header-anchor" href="#停止存储库服务" aria-hidden="true">#</a> 停止存储库服务</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">killall</span> svnserve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="版本库精简流程" tabindex="-1"><a class="header-anchor" href="#版本库精简流程" aria-hidden="true">#</a> 版本库精简流程</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 终止服务并创建一个新的版本库</span>
<span class="token function">killall</span> svnserve
svnadmin create <span class="token operator">&lt;</span>new-path<span class="token operator">&gt;</span>

<span class="token comment"># 导出原版本库的 500~550 版本到新版本库中</span>
svnadmin dump <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> -r <span class="token number">500</span>:550 <span class="token operator">&gt;</span> ~/repo.dump
svnadmin load <span class="token operator">&lt;</span>new-path<span class="token operator">&gt;</span> <span class="token operator">&lt;</span> ~/repo.dump

<span class="token comment"># 复制原版本库中的必要文件并将其删除</span>
<span class="token function">cp</span> -a <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>/conf/* <span class="token operator">&lt;</span>new-path<span class="token operator">&gt;</span>/conf/
<span class="token function">rm</span> -rf <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>

<span class="token comment"># 使用新版本库启动服务</span>
svnserve -d -r <span class="token operator">&lt;</span>new-path<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">12/5/2021, 10:16:47 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: sxyazi@gmail.com">sxyazi</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.39480b94.js" defer></script>
  </body>
</html>
